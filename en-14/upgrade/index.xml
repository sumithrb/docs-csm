<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Upgrade on Cray System Management (CSM)</title>
    <link>/docs-csm/en-14/upgrade/</link>
    <description>Recent content in Upgrade on Cray System Management (CSM)</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-US</language>
    <lastBuildDate>Mon, 17 Jul 2023 03:18:58 +0000</lastBuildDate><atom:link href="/docs-csm/en-14/upgrade/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Upgrade Automation</title>
      <link>/docs-csm/en-14/upgrade/scripts/upgrade/upgrade_automation/</link>
      <pubDate>Mon, 17 Jul 2023 03:19:01 +0000</pubDate>
      
      <guid>/docs-csm/en-14/upgrade/scripts/upgrade/upgrade_automation/</guid>
      <description>Upgrade Automation This document describes how the CSM upgrade process is automated.
Overview In a nutshell, an upgrade is:
 Upload new artifacts into a running system. Rebuild each NCN with the newly uploaded images. Deploy new charts after all NCNs are upgraded.  Prerequisites Everything that is needed before upgrading an NCN.
 NOTE:
The prerequisites.sh script is required to run on both ncn-m001 and ncn-m002 (at different points in the upgrade process).</description>
    </item>
    
    <item>
      <title>SLS Updater.py TechNICal Details</title>
      <link>/docs-csm/en-14/upgrade/scripts/sls/sls_updater.py_technical_details/</link>
      <pubDate>Mon, 17 Jul 2023 03:19:00 +0000</pubDate>
      
      <guid>/docs-csm/en-14/upgrade/scripts/sls/sls_updater.py_technical_details/</guid>
      <description>sls_updater.py Technical Details No action needed. Informational purposes only.
Actions and order This migration is performed offline for data security. The running SLS file is first dumped, then the migration script is run and a new, migrated output file is created.
 Migrate switch naming (in order): leaf to leaf-bmc, and agg to leaf. Remove api-gateway entries from HMLB subnets for CSM 1.2 security. Remove kubeapi-vip reservations for all networks except NMN.</description>
    </item>
    
    <item>
      <title>SLS Updates Expert Mode</title>
      <link>/docs-csm/en-14/upgrade/scripts/sls/expert_mode/</link>
      <pubDate>Mon, 17 Jul 2023 03:19:00 +0000</pubDate>
      
      <guid>/docs-csm/en-14/upgrade/scripts/sls/expert_mode/</guid>
      <description>SLS Updates Expert mode The 1.2 SLS Upgrader aims to make the upgrade of SLS from pre-CMS 1.2 to CSM 1.2 as seamless as possible. However, certain system constraints and subnet sizes quickly necessitate overriding standard input.
 Key takeaways When to use expert mode Minimal input review Forcing preservation of some existing values Expert mode: Overriding defaults and forced guiding of upgrades  Expert mode: Prerequisites Expert mode: Process Expert mode: Example    Key takeaways  Expert mode requires both an iterative (offline) process and command line override values.</description>
    </item>
    
    <item>
      <title>Upgrade SLS Offline From 1.0.x To Csm 1.2</title>
      <link>/docs-csm/en-14/upgrade/scripts/sls/readme.sls_upgrade/</link>
      <pubDate>Mon, 17 Jul 2023 03:19:00 +0000</pubDate>
      
      <guid>/docs-csm/en-14/upgrade/scripts/sls/readme.sls_upgrade/</guid>
      <description>Upgrade SLS Offline from CSM 1.0.x to CSM 1.2 Abstract Prior to updating SLS, at a minimum, answers to the following questions must be known:
  Will user traffic (non-administrative) come in via the CAN or CHN, or is the site air-gapped?
By default when upgrading to CSM 1.2, non-administrative user traffic is migrated from the CAN to the CHN while minimizing changes. If instead it is desired that the non-administrative user traffic continue to come in via the CAN, or if the site is air-gapped, then this must be explicitly specified during the SLS update.</description>
    </item>
    
    <item>
      <title>Prepare For Upgrade</title>
      <link>/docs-csm/en-14/upgrade/prepare_for_upgrade/</link>
      <pubDate>Mon, 17 Jul 2023 03:18:59 +0000</pubDate>
      
      <guid>/docs-csm/en-14/upgrade/prepare_for_upgrade/</guid>
      <description>Prepare For Upgrade Before beginning an upgrade to a new version of CSM, there are a few things to do on the system first.
 Reduced resiliency during upgrade Export Nexus data Adding switch admin password to Vault Ensure SNMP is configured on the management network switches Start typescript Running sessions Health validation Stop typescript Preparation completed  Reduced resiliency during upgrade Warning: Management service resiliency is reduced during the upgrade.</description>
    </item>
    
    <item>
      <title>1.3.0 Or Later To 1.4.0 Upgrade Process</title>
      <link>/docs-csm/en-14/upgrade/upgrade_management_nodes_and_csm_services/</link>
      <pubDate>Mon, 17 Jul 2023 03:18:58 +0000</pubDate>
      
      <guid>/docs-csm/en-14/upgrade/upgrade_management_nodes_and_csm_services/</guid>
      <description>CSM 1.3.0 or later to 1.4.0 Upgrade Process Introduction This document guides an administrator through the upgrade of Cray Systems Management from v1.3 to v1.4. When upgrading a system, follow this top-level file from top to bottom. The content on this top-level page is meant to be terse. For additional reference material on the upgrade processes and scripts mentioned explicitly on this page, see resource material.
Important Notes Service request adjustments are needed for small systems   For systems with only three worker nodes (typically Testing and Development Systems (TDS)), prior to proceeding with this upgrade, CPU limits MUST be lowered on several services in order for this upgrade to succeed.</description>
    </item>
    
    <item>
      <title>Stage 0 - Prerequisites And Preflight Checks</title>
      <link>/docs-csm/en-14/upgrade/stage_0_prerequisites/</link>
      <pubDate>Mon, 17 Jul 2023 03:18:58 +0000</pubDate>
      
      <guid>/docs-csm/en-14/upgrade/stage_0_prerequisites/</guid>
      <description>Stage 0 - Prerequisites and Preflight Checks  Reminders:
 CSM 1.3.0 or higher is required in order to upgrade to CSM 1.4.0. If any problems are encountered and the procedure or command output does not provide relevant guidance, see Relevant troubleshooting links for upgrade-related issues.   Stage 0 has several critical procedures which prepare the environment and verify if the environment is ready for the upgrade.
 Stage 0 - Prerequisites and Preflight Checks  Start typescript Stage 0.</description>
    </item>
    
    <item>
      <title>Stage 1 - Kubernetes Upgrade</title>
      <link>/docs-csm/en-14/upgrade/stage_1/</link>
      <pubDate>Mon, 17 Jul 2023 03:18:58 +0000</pubDate>
      
      <guid>/docs-csm/en-14/upgrade/stage_1/</guid>
      <description>Stage 1 - Kubernetes Upgrade Reminder: If any problems are encountered and the procedure or command output does not provide relevant guidance, see Relevant troubleshooting links for upgrade-related issues.
 Start typescript on ncn-m001 Stage 1.1 - Master node image upgrade Argo workflows Stage 1.2 - Worker node image upgrade  Option 1 - Serial upgrade Option 2 - Parallel upgrade (Tech preview)  Restrictions Example     Stage 1.</description>
    </item>
    
    <item>
      <title>Stage 2 - Service Upgrades</title>
      <link>/docs-csm/en-14/upgrade/stage_2/</link>
      <pubDate>Mon, 17 Jul 2023 03:18:58 +0000</pubDate>
      
      <guid>/docs-csm/en-14/upgrade/stage_2/</guid>
      <description>Stage 2 - CSM Service Upgrades Reminder: If any problems are encountered and the procedure or command output does not provide relevant guidance, see Relevant troubleshooting links for upgrade-related issues.
 Start typescript Perform upgrade Verify Keycloak users Take Etcd Manual Backup Stop typescript Stage completed  Start typescript   (ncn-m002#) If a typescript session is already running in the shell, then first stop it with the exit command.</description>
    </item>
    
    <item>
      <title>Upgrade Only</title>
      <link>/docs-csm/en-14/upgrade/upgrade_only_csm/</link>
      <pubDate>Mon, 17 Jul 2023 03:18:58 +0000</pubDate>
      
      <guid>/docs-csm/en-14/upgrade/upgrade_only_csm/</guid>
      <description>Upgrade only CSM This procedure describes how to upgrade Cray Systems Management (CSM) software on a CSM-only system without additional HPE Cray EX software products installed.
After the upgrade of CSM software, the CSM health checks will validate the system before doing any other operational tasks like the check and update of firmware on system components.
 Prepare for upgrade Upgrade management nodes and CSM services Validate CSM health Check and update firmware Upgrade complete  Note: If problems are encountered during the upgrade, some of the topics do have their own troubleshooting sections, but there is also a general troubleshooting topic.</description>
    </item>
    
    <item>
      <title>Validate Health During A Csm Upgrade</title>
      <link>/docs-csm/en-14/upgrade/validate_csm_health_during_upgrade/</link>
      <pubDate>Mon, 17 Jul 2023 03:18:58 +0000</pubDate>
      
      <guid>/docs-csm/en-14/upgrade/validate_csm_health_during_upgrade/</guid>
      <description>Validate CSM Health During a CSM Upgrade  Before performing the health validation, be sure that at least 15 minutes have elapsed since the CSM services were upgraded. This allows the various Kubernetes resources to initialize and start. If the site does not use UAIs, then skip UAS and UAI validation. If UAIs are used, then before validating UAS and UAI, first validate any products that configure UAS (such as Cray Analytics and Cray Programming Environment); the procedures for this are beyond the scope of this document.</description>
    </item>
    
    <item>
      <title>Upgrade</title>
      <link>/docs-csm/en-14/upgrade/readme/</link>
      <pubDate>Mon, 17 Jul 2023 03:18:57 +0000</pubDate>
      
      <guid>/docs-csm/en-14/upgrade/readme/</guid>
      <description>Upgrade CSM There are several alternative procedures to perform an upgrade of Cray Systems Management (CSM) software. Choose the appropriate procedure from the sections below.
Option 1: Upgrade CSM with additional HPE Cray EX software products To perform an upgrade of CSM along with additional HPE Cray EX software products, see the Upgrade CSM and additional products with IUF procedure.
This is the most common procedure to follow, and it should be used when performing an upgrade from one HPC CSM software recipe to another.</description>
    </item>
    
  </channel>
</rss>
